/** * * performs a deep merge on two JSONObjects * * @param {object} target the object to merge into * @param {object} source the object to merge into * * @module fm-json-additions * @see https://github.com/geistinteractive/fm-json-additions * * @history 2018-02-11 deep merge support, dave@geistinteractive.com * @history 2017–05-15 fixed gh# 1, todd@geistinteractive.com * @history 2017–04-04 created, todd@geistinteractive.com * @history 2025-12-11 - jueves - Marco: se modifica completamente para que admita simbolos decimales diferentes de los americanos y se hace con un while para simplificar el código */Let ( [	~SimboloDecimal = JSONGetElement ( Get ( FileLocaleElements ); "Num.Decimal" ) ;	~claves = JSONListKeys ( source ; "" ) ;	~total = ValueCount ( ~claves ) + 1 ;	~Resultado = While ( 			[ 				~count = 1 ;				~Resultante = target			]; 			~count < ~total ; 			[				~clave = GetValue ( ~claves ; ~count ) ;				~valor = JSONGetElement ( source ; ~clave ) ;				~PrimerCaracter = Left ( ~valor ; 1 ) ;				~ComprobarNumero = Filter ( ~PrimerCaracter ; "0123456789" & ~SimboloDecimal ) = ~PrimerCaracter ;				JSONTipo = If ( ~ComprobarNumero and GetAsText ( ~valor ) = GetAsNumber ( ~valor ) ; 2 ; 1 ) ;				~Resultante = 					JSONSetElement ( ~Resultante ; 						[ ~clave ; ~valor ; JSONTipo ]					); 				~count = ~count + 1 			]; 			~Resultante			)]; ~Resultado )/*1 JSONString = String (" ")2 JSONNumber = Number3 JSONObject = Object ( { } )4 JSONArray = Array ( [ ] )5 JSONBoolean = Boolean6 JSONNull = Null0 JSONRaw = Lo determina el JSON Parser*/